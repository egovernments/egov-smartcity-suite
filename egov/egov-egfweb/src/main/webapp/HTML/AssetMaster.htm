#-------------------------------------------------------------------------------
# eGov suite of products aim to improve the internal efficiency,transparency, 
#      accountability and the service delivery of the government  organizations.
#   
#       Copyright (C) <2015>  eGovernments Foundation
#   
#       The updated version of eGov suite of products as by eGovernments Foundation 
#       is available at http://www.egovernments.org
#   
#       This program is free software: you can redistribute it and/or modify
#       it under the terms of the GNU General Public License as published by
#       the Free Software Foundation, either version 3 of the License, or
#       any later version.
#   
#       This program is distributed in the hope that it will be useful,
#       but WITHOUT ANY WARRANTY; without even the implied warranty of
#       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#       GNU General Public License for more details.
#   
#       You should have received a copy of the GNU General Public License
#       along with this program. If not, see http://www.gnu.org/licenses/ or 
#       http://www.gnu.org/licenses/gpl.html .
#   
#       In addition to the terms of the GPL license to be adhered to in using this
#       program, the following additional terms are to be complied with:
#   
#   	1) All versions of this program, verbatim or modified must carry this 
#   	   Legal Notice.
#   
#   	2) Any misrepresentation of the origin of the material is prohibited. It 
#   	   is required that all modified versions of this material be marked in 
#   	   reasonable ways as different from the original version.
#   
#   	3) This license does not grant any rights to any user of the program 
#   	   with regards to rights under trademark law for use of the trade names 
#   	   or trademarks of eGovernments Foundation.
#   
#     In case of any queries, you can reach eGovernments Foundation at contact@egovernments.org.
#-------------------------------------------------------------------------------
<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
Asset Master
<head>
	
<script language="javascript">
pageMode="modify";
var assetTypeId,assetCategoryId;
var saveAndClose=false;
var codeToSearch=null;
var viewMode=null;

function ButtonPress(name){
	if(name.toLowerCase()=='savenew')
	saveAndClose=false;
	if(name.toLowerCase()=='saveclose')
	saveAndClose=true;
	if (pageMode == "modify"){
		PageManager.UpdateService.submitForm('assetsUpdate');
	}else{
		PageManager.UpdateService.submitForm('assetsInsert');
	}
}
function hideOrShowRows(obj){
 var typeTextObj=document.getElementById('typeText');
 typeTextObj.value=obj.options[obj.selectedIndex].text;
 if(obj.selectedIndex<0){
	alert("select something");
	return;
 }else{
	var tObj1=document.getElementsByName('movable');
	var tObj2=document.getElementsByName('immovable');
	var tObj3=document.getElementsByName('land');
	if(obj.options[obj.selectedIndex].text=='Movable'){
		for(var i=0;i<tObj1.length;i++){
			tObj1[i].style.display="block";
		}
		for(var i=0;i<tObj2.length;i++){
			tObj2[i].style.display="none";
		}
		for(var i=0;i<tObj3.length;i++){
			tObj3[i].style.display="none";
		}
	}else if(obj.options[obj.selectedIndex].text=='Immovable'){
		for(var i=0;i<tObj2.length;i++){
			tObj2[i].style.display="block";
		}
		for(var i=0;i<tObj1.length;i++){
			tObj1[i].style.display="none";
		}
		for(var i=0;i<tObj3.length;i++){
			tObj3[i].style.display="none";
		}
	}else if(obj.options[obj.selectedIndex].text=='Land'){
		for(var i=0;i<tObj3.length;i++){
			tObj3[i].style.display="block";
		}
		for(var i=0;i<tObj2.length;i++){
			tObj2[i].style.display="none";
		}
		for(var i=0;i<tObj1.length;i++){
			tObj1[i].style.display="none";
		}
	}
 }
}
function enableValue(obj){
	var etcVal=document.getElementById('asset_etcValue');
	if(etcVal.disabled && obj.checked){
	  etcVal.disabled=false;
	}else if(etcVal.disabled && !obj.checked){
	  etcVal.disabled=true;
	}else if(!etcVal.disabled && obj.checked){
	  etcVal.disabled=false;
	}else if(!etcVal.disabled && !obj.checked){
	  etcVal.disabled=true;
	}
}

function getData(){

	PageManager.DataService.callDataService('assetInitData');
	codeToSearch = PageManager.DataService.getQueryField('assets_codeToSearch');
	viewMode = PageManager.DataService.getQueryField('isView');
	document.getElementById('asset_code').focus();
	if(viewMode){
		document.getElementById('screenName').innerHTML="Asset - View";
		disableControls(0, true);
		document.getElementById('trModify').style.display='none';
		document.getElementById('trNew').style.display='none';
	}else if(codeToSearch){
		pageMode="modify";
		document.getElementById('screenName').innerHTML="Asset - Modify";
		document.getElementById('trModify').style.display='block';
		document.getElementById('trNew').style.display='none';

	}else{
		//new mode
		pageMode="new";
		document.getElementById('screenName').innerHTML="Assets - New";
		document.getElementById('trModify').style.display='none';
		document.getElementById('trNew').style.display='block';
	}
	PageValidator.addCalendars();
	//PageManager.ListService.callListService();


	/*
	var asset_codeToSearch=PageManager.DataService.getQueryField('asset_codeToSearch');
	if(asset_codeToSearch){
		PageManager.DataService.callDataService('assetsModData');
	}else{
	//var tr8 = document.getElementById('asset').rows[8];
	//tr8.style.display="none";

	pageMode="New";
	document.getElementById('screenName').innerHTML="Assets - New";
	document.getElementById('submitButton').innerHTML="New";
	}*/

	/*var typeVal=PageManager.DataService.getQueryField('assetType');
	if(typeVal != null)
	{
		document.Assets.assetCategory.setAttribute("exilListSource","assetCategory");
		PageManager.DataService.setQueryField('assetType',typeVal);
		PageManager.DataService.callDataService('assetCategoryList');

	}*/
}

function beforeRefreshPage(dc){
	if(dc.values['asset_commDate']!=null){
		dc.values['asset_commDate']=formatDate(dc.values['asset_commDate']);
	}
}
function afterRefreshPage(dc){

	if(dc.values['serviceID']=='assetInitData' && codeToSearch!=null){
		PageManager.DataService.setQueryField('assets_codeToSearch',codeToSearch);
		PageManager.DataService.callDataService('assetsModData');
	}
	if(dc.values['serviceID']=='assetsModData'){
		hideOrShowRows(document.getElementById('asset_typeId'));
		if(!viewMode){
			enableValue(document.getElementById('asset_hasTrees'));
		}
	}
	/*PageManager.DataService.removeQueryField('assetType');
	PageManager.DataService.removeQueryField('assetCategory');

	if(dc.values['asset_isActive']=='0')
		document.getElementById('asset_isActive').checked=false;
	else if(dc.values['asset_isActive']=='1')
		document.getElementById('asset_isActive').checked=true;

	 if(dc.values['serviceID'] == 'assetsModData') {

		var asset_dateOfCapitalization=dc.values['asset_dateOfCapitalization']
		if(asset_dateOfCapitalization){
		asset_dateOfCapitalization=formatDate(asset_dateOfCapitalization);
		document.getElementById('asset_dateOfCapitalization').value=asset_dateOfCapitalization;
		}


	}*/
	return true;
}

function getCategory(obj){
/*	clearCombo("assetCategory");
	document.Assets.assetCategory.setAttribute("exilListSource","assetCategory");
	var typeName = obj.options[obj.selectedIndex].value;
	var typeObj = document.getElementById('asset_assetType');
	typeObj.value = obj.options[obj.selectedIndex].text;
	PageManager.DataService.setQueryField('assetType',typeName);
	PageManager.DataService.callDataService('assetCategoryList');

		/*		clearCombo("assetCategory");
			var accObj=document.getElementById('assetCategory');
			accObj.setAttribute("exilListSource","assetCategoryList");
			PageManager.DataService.setQueryField('assetType',typeName);
		 	PageManager.DataService.callDataService('assetCategoryList');*/

}

function clearCombo(cId){
	var bCtrl=document.getElementById(cId);
	for(var i=bCtrl.options.length-1;i>=0;i--){
		bCtrl.remove(i);
	}
}



function onClickCancel(){
	window.location="AssetMasterEnq.htm?assets_codeToSearch="+document.getElementById('asset_code').value;
}

function onClickModify(){
	saveAndClose=true;
	PageManager.UpdateService.submitForm('assetsUpdate');
}


function afterUpdateService(dc){
	/*var control1=document.getElementById('assetType');
	var assetTypeId=control1.options[control1.selectedIndex].value;
	var control2=document.getElementById('assetCategory');
	var assetCategoryId=control2.options[control2.selectedIndex].value;
	window.location="Asset.htm?asset_codeToSearch="+dc.values['asset_code']+"&assetType_id="+assetTypeId+"&asset_id="+assetCategoryId;
	return true;*/
	if(saveAndClose){
		window.location="AssetMasterEnq.htm?assets_codeToSearch="+dc.values['asset_code'];
	}else{
		window.location="AssetMaster.htm";
	}
}



</script>

</head>
<body bgcolor="#ffffff" onKeyDown ="CloseWindow(event);" bottommargin="0" topmargin="0" rightmargin="0" leftmargin="0" marginheight="0" marginwidth="0" onLoad="getData();">
<form name="Assets">
<input type="hidden" name="typeText" id="typeText">
<input type="hidden" name="egUser_id" id="egUser_id">
<input type="hidden" name="asset_ID" id="asset_ID">
<input type="hidden" name="land_ID" id="land_ID">
<input type="hidden" name="oldRevisedValue" id="oldRevisedValue">
<input type="hidden" name="tableName" id="tableName" value="asset">
<input type="hidden"  name="asset_assetCategory" id="asset_assetCategory">


<table width="100%" height="74%" border="0" cellpadding="0" cellspacing="0">
	  </table>
	<table width="100%" border=0 cellpadding="6" cellspacing="0">
			<tr>
			<td valign="top" class="normaltext"><!------------Content begins here ------------------>
						<table width="100%" border=0 cellpadding="3" cellspacing="0" id="asset" name="asset" >
							<tr>
								<td class="rowheader" colspan="4" width="884"><span id="screenName" class="headerwhite2">
                                 Asset</span></td>
							</tr>
							<tr class="row1">
							  <td><div align="right" class="normaltext">Code<span class="leadon">*</span></div></td>
							   <td>
								<input name="asset_code" class="fieldinput" id="asset_code" size="10" exilDataType="exilAlphaNumeric" exilMustEnter="true">
							  </td>

							  <td><div align="right" class="normaltext">Name<span class="leadon">*</span></div></td>
							  <td><input name="asset_name" class="fieldinput" id="asset_name" size="10" exilDataType="exilAnyChar" exilMustEnter="true">
							  </td>
							</tr>

							<tr class="row2">
							<td><div align="right" class="normaltext">&nbsp;Category<SPAN
          class=leadon>*</SPAN>
            </div></td>
							<td><select name="asset_parentid" id="asset_parentid" class="fieldinput" maxlength="50"   exilMustEnter="true"
            exilListSource="assetCategory"></select></td>
							<td><div align="right" class="normaltext">Status<SPAN
            class=leadon>*</SPAN>
            &nbsp; </div></td>
							<td><SELECT class=fieldinput
            id=asset_status name="asset_status" exilMustEnter="true"
            maxlength="50" exilListSource="assetStatus"></SELECT>
								</td></tr>
        <TR class=row1>
          <TD>
            <DIV class=normaltext align=right>Type<SPAN
            class=leadon>*</SPAN> </DIV></TD>
          <TD><SELECT class=fieldinput id=asset_typeId

            name="asset_typeId" exilMustEnter="true"
            maxlength="50" onChange="hideOrShowRows(this)" exilListSource="assetType"
           ></SELECT></TD>
							  <td ><div align="right" class="normaltext">Description</div></td>
							<td><input name="asset_description" class="fieldinput" id="asset_description" size="10"  exilDataType="exilAnyChar"  > </td></TR>

							<tr class="row1">
							<td ><div align="right" class="normaltext">Mode Of
            Acquisition<SPAN class=leadon>*</SPAN>
             </div></td>
							<td><SELECT class=fieldinput id=asset_modeId

              name="asset_modeId" exilMustEnter="true" maxlength="50" exilListSource="assetMode"> </SELECT>  </td>
							  <td ><div align="right" class="normaltext">
          Department</div></td>
							<td><SELECT class=fieldinput id=asset_departmentid
            name="asset_departmentid" maxlength="50"
            exilListSource="department"></SELECT>&nbsp; </td>

							</tr>
							<tr class="row2">
							  <td><div align="right" class="normaltext">
             Location</div></td>
							   <td><SELECT class=fieldinput id=asset_location
            name="asset_location" maxlength="50"
            exilListSource="wardNameList"></SELECT>&nbsp;</td>
							   <td ><div align="right" class="normaltext">Initial
            Capitalization Value<SPAN class=leadon>*</SPAN> </div></td>
							<td><input name="asset_initVal" class="fieldinput" id="asset_initVal" size="10" exilDataType="exilUnsignedDecimal" exilMustEnter="true" > </td>

							</tr>

							<tr class="row1" id="movable" name="movable"  style="DISPLAY: none">
								<td><div align="right" class="normaltext">Commencing Date</div></td>
									<td><input name="asset_commDate" class="fieldinput" id="asset_commDate" size="10"  exilDataType="exilFutureDate" exilCalendar="true"> </td>
								<td><div align="right" class="normaltext">Max Shifts</div></td>
									<td><input name="asset_maxShifts" class="fieldinput" id="asset_maxShifts" size="10"  exilDataType="exilUnsignedInt"> </td>
							</tr>

							<tr class="row1" id="immovable" name="immovable" style="DISPLAY: none">
								<td><div align="right" class="normaltext">Documents Available</div></td>
									<td><input type="checkbox"
            align="left" name="asset_hasDocs" id="asset_hasDocs" value="1"> </td>
								<td><div align="right" class="normaltext">Survey Number</div></td>
									<td><input name="asset_surveyNo" class="fieldinput" id="asset_surveyNo" size="10"  exilDataType="exilAnyChar"> </td>
							</tr>
							<tr class="row1" id="immovable" name="immovable"  style="DISPLAY: none">
								<td><div align="right" class="normaltext">&nbsp;</div></td>
									<td>&nbsp; </td>
								<td><div align="right" class="normaltext">Dimensions</div></td>
									<td><input name="asset_dimensions" class="fieldinput" id="asset_dimensions" size="10"   exilDataType="exilAnyChar"> </td>
							</tr>
							<tr class="row1" id="land" name="land"  style="DISPLAY: none">
								<td><div align="right" class="normaltext"> Lease</div></td>
								<td><SELECT class=fieldinput id=asset_landType

              name="asset_landType"   maxlength="50" exilListSource="landTypes"> </SELECT> </td>
								<td><div align="right" class="normaltext">Survey Number</div></td>
									<td><input name="asset_lSNO" class="fieldinput" id="asset_lSNO" size="10"  exilDataType="exilAnyChar"> </td>
							</tr>
							<tr class="row1" id="land" name="land"  style="DISPLAY: none">
								<td><div align="right" class="normaltext">&nbsp;</div></td>
									<td>&nbsp; </td>
								<td><div align="right" class="normaltext">
            <DIV class=normaltext align=right>Dimensions</DIV></div></td>
									<td><input name="asset_lDimensions" class="fieldinput" id="asset_lDimensions" size="10"  exilDataType="exilAnyChar"> </td>
							</tr>
							<tr class="row1" id="land" name="land" style="DISPLAY: none">
								<td><div align="right" class="normaltext">Trees/etc</div></td>
								<td><input type="checkbox"
            align="left" name="asset_hasTrees" id="asset_hasTrees" onChange="enableValue(this)" value="1"> </td>
								<td><div align="right" class="normaltext">Value</div></td>
									<td><input name="asset_etcValue" class="fieldinput" id="asset_etcValue" size="10"  disabled exilDataType="exilUnsignedDecimal"> </td>
							</tr>










                             <tr class="row2">
				<td height="25" colspan="4" valign="bottom" class="smalltext" width="884"><p class="smalltext">&nbsp;</p>
				</td>
			</tr>
			<tr class="row1">
						 <td colspan="4" align="middle" width="100%"><!-- Buttons Start Here -->
				<table border="0" cellpadding="0" cellspacing="0">
					<tr name="trModify" id="trModify">
						<td align="right"><IMG src="../images/Button_leftside.gif" width="7" height="18"></td>
						<td bgcolor="#fe0000" valign="center" nowrap><A class=buttonprimary href="#" onClick="onClickModify();" id="submitButton">Modify</A></td>
						<td><IMG src="../images/Button_rightside.gif" width="7" height="18"></td>
						<td><IMG src="../images/spacer.gif" width=8></td>
						<td align="right"><IMG src="../images/Button_second_leftside.gif" width="6" height="18"></td>
						<td bgcolor="#ffffff" valign="center" nowrap background="../images/Button_second_middle.gif"><A class=buttonsecondary onClick="onClickCancel();" href="#" >Cancel</A></td>
						<td><IMG src="../images/Button_second_rightside.gif" width="6" height="18"></td>
						<td><IMG src="../images/spacer.gif" width=8></td>
						<td align="right"><IMG src="../images/Button_second_leftside.gif" width="6" height="18"></td>
						<td bgcolor="#ffffff" valign="center" nowrap background="../images/Button_second_middle.gif"><A class=buttonsecondary onclick=window.close() href="#">Close</A></td>
						<td><IMG src="../images/Button_second_rightside.gif" width="6" height="18"></td>
					</tr>
                  <tr name="trNew" id="trNew">
						<td align="right"><IMG src="../images/Button_leftside.gif" width="7" height="18"></td>
						<td bgcolor="#fe0000" valign="center" nowrap><A class=buttonprimary href="#" onClick="ButtonPress('savenew');" id="savenNew">Save & New</A></td>
						<td><IMG src="../images/Button_rightside.gif" width="7" height="18"></td>
						<td><IMG src="../images/spacer.gif" width=8></td>

						<td align="right"><IMG src="../images/Button_leftside.gif" width="7" height="18"></td>
						<td bgcolor="#fe0000" valign="center" nowrap><A class=buttonprimary href="#" onClick="ButtonPress('saveclose');" id="savenClose">Save & Close</A></td>
						<td><IMG src="../images/Button_rightside.gif" width="7" height="18"></td>
						<td><IMG src="../images/spacer.gif" width=8></td>

						<td align="right"><IMG src="../images/Button_second_leftside.gif" width="6" height="18"></td>
						<td bgcolor="#ffffff" valign="center" nowrap background="../images/Button_second_middle.gif"><A class=buttonsecondary onClick="onClickCancel();" href="#" >Cancel</A></td>
						<td><IMG src="../images/Button_second_rightside.gif" width="6" height="18"></td>
						<td><IMG src="../images/spacer.gif" width=8></td>

						<td align="right"><IMG src="../images/Button_second_leftside.gif" width="6" height="18"></td>
						<td bgcolor="#ffffff" valign="center" nowrap background="../images/Button_second_middle.gif"><A class=buttonsecondary onclick=window.close() href="#">Close</A></td>
						<td><IMG src="../images/Button_second_rightside.gif" width="6" height="18"></td>
					</tr>


				</table>
			</td>
				</tr>

							  </table>

							</td>
						</tr>


                              </table></TD></TR></TABLE><!------------ Content ends here ------------------></TD></TR></TABLE></TD><!------------Right Navigation Ends here------------------></TR></TABLE><!---------------- Footer begins here ----------><!---------------- Footer ends here ---------->
</form>
</body>
</html>

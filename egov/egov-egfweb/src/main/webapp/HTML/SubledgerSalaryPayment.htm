#-------------------------------------------------------------------------------
# eGov suite of products aim to improve the internal efficiency,transparency, 
#      accountability and the service delivery of the government  organizations.
#   
#       Copyright (C) <2015>  eGovernments Foundation
#   
#       The updated version of eGov suite of products as by eGovernments Foundation 
#       is available at http://www.egovernments.org
#   
#       This program is free software: you can redistribute it and/or modify
#       it under the terms of the GNU General Public License as published by
#       the Free Software Foundation, either version 3 of the License, or
#       any later version.
#   
#       This program is distributed in the hope that it will be useful,
#       but WITHOUT ANY WARRANTY; without even the implied warranty of
#       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#       GNU General Public License for more details.
#   
#       You should have received a copy of the GNU General Public License
#       along with this program. If not, see http://www.gnu.org/licenses/ or 
#       http://www.gnu.org/licenses/gpl.html .
#   
#       In addition to the terms of the GPL license to be adhered to in using this
#       program, the following additional terms are to be complied with:
#   
#   	1) All versions of this program, verbatim or modified must carry this 
#   	   Legal Notice.
#   
#   	2) Any misrepresentation of the origin of the material is prohibited. It 
#   	   is required that all modified versions of this material be marked in 
#   	   reasonable ways as different from the original version.
#   
#   	3) This license does not grant any rights to any user of the program 
#   	   with regards to rights under trademark law for use of the trade names 
#   	   or trademarks of eGovernments Foundation.
#   
#     In case of any queries, you can reach eGovernments Foundation at contact@egovernments.org.
#-------------------------------------------------------------------------------
<html>
<head>
<script language="javascript">
var sIndex,sValue,sText;
	function clearCombo(cId)
	{
		var bCtrl=document.getElementById(cId);
		for(var i=bCtrl.options.length-1;i>=0;i--)
		{
   			bCtrl.remove(i);
		}
	}

	function getBanks(){
		clearCombo('subLedgerPaymentHeader_bankId');
		clearCombo('subLedgerPaymentHeader_branchAccountId');
		//var fundObj=document.getElementById('fund_id');
		//if(fundObj.selectedIndex==-1){
		//	alert("Please select fund");
		//	return;
		//}
		//var paramFund=fundObj.options[fundObj.selectedIndex].value;
		//PageManager.DataService.setQueryField('fundForBank',paramFund);
		PageManager.DataService.callDataService('fundToBank');
	}
	function getData() {
		/* var billCollector_code = PageManager.DataService.getQueryField('billCollector_id');
			if (billCollector_code) {
				var obj=document.getElementById('subLedgerPaymentHeader_paidBy');
				try {
					for(var i=0;i<obj.length;i++)
						if(obj.options[i].value==billCollector_code) {
							obj.options[i].selected=true;
							break;
						}
					} catch(e) {}
				}

				*/
		try {
			var pay_code=PageManager.DataService.getQueryField('department_id');
			if(pay_code) {
				var obj=document.getElementById('chequeDetail_payTo');
				for(var i=0;i<obj.length;i++)
					if(obj.options[i].value==pay_code) {
						obj.options[i].setAttribute('selected',true);
						break;
					}
			}
	   } catch(e) {}
	}
	 function hideButtons(){

					document.getElementById('modGrid').style.display="block";
					document.getElementById('submitGrid').style.display ="none";

		}
		function hideBut(){

			document.getElementById('modGrid').style.display="none";
			document.getElementById('submitGrid').style.display ="block";

		}

	function onLoadTasks() {

	 	PageValidator.addCalendars();
	 	insertDates('voucherHeader_voucherDate');
		/*document.getElementById('submit').style.display="none";
		document.getElementById('submiti').style.display="none";
		document.getElementById('submitn').style.display="none";
		document.getElementById('submits').style.display="none";
	*/	//document.getElementById('submit').style.display="none";
	 	var sm=PageManager.DataService.getQueryField('showMode');
	 	var drillDownCgno=PageManager.DataService.getQueryField('drillDownCgn');
	 	//means the page was called from drill down of search so disable all controls and show old data
	 	if(drillDownCgno)
	 	{
	 		if(sm=="edit"){

		 		window.cgnSet=true;
				window.data=true;

				 var aObj=document.getElementById('subLedgerPaymentHeader_branchAccountId');
		 		 aObj.setAttribute('exilListSource','accountListFrom');

				PageManager.DataService.setQueryField('type','Cashier');
	 			PageManager.DataService.setQueryField('cgNumber',drillDownCgno);
				PageManager.DataService.callDataService('loadSubLedgerSalaryData');
				//obj.setAttribute('exilListSource','conBillDetail_worksDetailID');
				document.getElementById('voucherHeader_voucherNumber').setAttribute('exilDataType','exilAlphaNumeric');
		  		document.getElementById('modGrid').style.display='none';
		  		document.getElementById('submitGrid').style.display ='block';
		  		document.getElementById('saveandnew').style.display ="none";
		  		document.getElementById('cgnLabel').style.display='block';
		  		document.getElementById('cgnText').style.display='block';
		  		document.getElementById('backbutton').style.display='none';
//		  		document.forms[0].voucherHeader_voucherNumber.disabled=true;
		 		document.getElementById('modeOfExec').value="edit";
		 		var obj=document.getElementById('trnHeader');
				obj.style.display="block";

		 		}
		 	 else{


	 	   var aObj=document.getElementById('subLedgerPaymentHeader_branchAccountId');
		   aObj.setAttribute('exilListSource','accountListFrom');

	 		window.cgnSet=true;
			window.data=true;
	 		disableControls(0,true);
	 		if(sm=="modify"){
	 			document.getElementById('modGrid').style.display='block';
	 			document.getElementById('backbutton').style.display="none";
	 		}else if(sm=="view"){
			 		document.getElementById('modGrid').style.display='none';
			 		document.getElementById('backbutton').style.display='block';
 		    }
 		    document.getElementById('voucherHeader_voucherNumber').setAttribute('exilDataType','exilAlphaNumeric');
 		    document.getElementById('cgnLabel').style.display='block';
			document.getElementById('cgnText').style.display='block';
			document.getElementById('submitGrid').style.display ="none";
			document.getElementById('bankbal').style.display='block';
	 		var rowsToHide=document.getElementById('filterRow1');
	 		rowsToHide.style.display="none";
	 		PageManager.DataService.setQueryField('type','Cashier');
	 		PageManager.DataService.callDataService('loadSubLedgerSalaryData');
	 		var obj=document.getElementById('trnHeader');
			obj.style.display="block";
	 		}
	 	}
	 	if(!drillDownCgno)
	 	{
	 	    hideBut();
	 	    document.getElementById('backbutton').style.display="none";
			window.cgnSet=false;
			window.data=false;
			PageManager.DataService.setQueryField('type','Cashier');
			PageManager.DataService.callDataService('subLedgerSalary');
		}
	}


	function beforeRefreshPage(dc) {
		if(dc.values['glCodeName'])
			{
			  glNameCode=dc.values['glCodeName'];
			 showEntry();
			}
		if(!window.cgnSet) {
			if(isNaN(parseInt(dc.values['voucherHeader_cgn']))) return;
			dc.values['voucherHeader_cgn']='SSP'+dc.values['voucherHeader_cgn'];
			window.cgnSet=true;
		}
		if(dc.values['serviceID']=='loadSubLedgerSalaryData'){

		//	dc.values['subLedgerPaymentHeader_typeOfPayment']=dc.values['rsph_typeOfPayment'];
			if(dc.values['subLedgerPaymentHeader_typeOfPayment']=='Cheque')
			{
				subLedgerSalaryPayment.chequeDetail_chequeNumber.disabled=false;
			subLedgerSalaryPayment.chequeDetail_chequeDate.disabled=false;
			subLedgerSalaryPayment.chequeDetail_chequeNumber.setAttribute('exilMustEnter','true');
			subLedgerSalaryPayment.chequeDetail_chequeDate.setAttribute('exilMustEnter','true');

			}
			dc.values['subLedgerPaymentHeader_typeOfPayment']=dc.values['typeOfPayment'];
			if(dc.values['typeOfPayment'] == 'Others'){
				document.getElementById('chequeDetail_chequeNumber').setAttribute('exilDataType','exilAlphaNumeric');
				document.getElementById('chqAvail').style.display="none";
				for(var ii=0;ii<subLedgerSalaryPayment.subLedgerPaymentHeader_typeOfPayment.length;ii++){

					if(subLedgerSalaryPayment.subLedgerPaymentHeader_typeOfPayment[ii].value=='Others'){
						subLedgerSalaryPayment.subLedgerPaymentHeader_typeOfPayment[ii].checked=true;
					}
				}

				check('subLedgerPaymentHeader_typeOfPayment');
			}else{
				document.getElementById('chequeDetail_chequeNumber').setAttribute('exilDataType','exilUnsignedInt');
			}
			dc.values['subLedgerPaymentHeader_branchAccountId']=dc.values['rsph_branchAccountId'];
		}
		if('salarySubLedgerPayment'==dc.values['serviceID']) {
			var obj=document.getElementById('trnHeader');
			if(dc.grids['Data_Grid']) {
				var len=dc.grids['Data_Grid'].length;
				if(len>=2) {
					obj.style.display="block";
					subLedgerSalaryPayment.voucherHeader_voucherNumber.focus();
					var tabObj=dc.grids['Data_Grid'];
					if(!tabObj)	return false;
					for(var i=1;i<len;i++)
						tabObj[i][3]=formatDate(tabObj[i][3]);
				} else {
					alert('No Salary Bill to pay');
					obj.style.display="none";
				}
			}
		}
		if(dc.values['serviceID']=='loadSubLedgerSalaryData'){
		var chk=document.getElementById("bSelect");
		chk.checked=true;

		}
		if(dc.values['serviceID']=='contraBalNumberF')
		PageManager.DataService.removeQueryField('voucherHeader_voucherDate');
	}

	function hide() {
		var obj=document.getElementById('trnHeader');
		obj.style.display="none";
	}

	function afterRefreshPage(dc) {
		var sm=PageManager.DataService.getQueryField('showMode');
		try{
		/*if (sm=='view' )
		{
			//alert("hh..");
			var accnoObj=document.getElementById("subLedgerPaymentHeader_branchAccountId");
			var accnotext=accnoObj.options[accnoObj.selectedIndex].text; //alert(accnotext);
			var accno=accnotext.split('--');	//alert(accno[0]);
			accnoObj.options[accnoObj.selectedIndex].text=accno[0];
		}*/
		}catch(err){}

		if (sm=='edit' && dc.values['serviceID']=='loadSubLedgerSalaryData' )
		{	//alert("inside salary");
			document.getElementById("voucherHeader_voucherNumberPrefix").style.display="block";
			var vnum=dc.values['voucherHeader_voucherNumber'];
			var subVnum=vnum.substring(0,2);
			document.getElementById("voucherHeader_voucherNumber").value=vnum.substring(2,vnum.length);
			document.getElementById("voucherHeader_voucherNumberPrefix").value=subVnum;

			document.getElementById("jv_voucherNumberPrefix").style.display="block";
			if(dc.values['jv_voucherNumber'])
			{
				var vnum=dc.values['jv_voucherNumber'];
				var subVnum=vnum.substring(0,2);
				document.getElementById("jv_voucherNumber").value=vnum.substring(2,vnum.length);
				document.getElementById("jv_voucherNumberPrefix").value=subVnum;
			}
			var voucherHeader_voucherDate=dc.values['voucherHeader_voucherDate'];
			var voucherDate=formatDateToDDMMYYYY6(voucherHeader_voucherDate);
			document.getElementById('voucherHeader_voucherDate').value=voucherDate;
			if(document.getElementById("oldVoucherDate").value == "")
			{
					document.getElementById("oldVoucherDate").value=formatDateToDDMMYYYY6(dc.values['voucherHeader_voucherDate']);
		 	}
		 	//alert(document.getElementById("oldVoucherDate").value);

			//loadBankBalance();
		}
		if (dc.values['serviceID']=='loadSubLedgerSalaryData' )
		{
			var voucherHeader_voucherDate=dc.values['voucherHeader_voucherDate'];
			var voucherDate=formatDateToDDMMYYYY6(voucherHeader_voucherDate);
			document.getElementById('voucherHeader_voucherDate').value=voucherDate;
			loadBankBalance();
		}
		if(dc.values['serviceID']=="AccountFundMap1")
		{
		   document.getElementById("fundSub_id").value=dc.values['fund1_id'];
		   //alert(document.getElementById("fundSub_id").value);
		}
		if(dc.values['serviceID']=='getCgn'){
			var cNumber=dc.values['getCgno'];
			document.getElementById('cgnNum').value=cNumber;
			drillIt();
			return;
		}
	if(dc.values['serviceID']=='contraBalNumberF')
		{
		document.getElementById('bank_bal').value=dc.values['balAvailable'];
		}
	if(dc.values['serviceID']=="subLedgerSalary")
		{
		document.getElementById('databaseDate').value=dc.values['databaseDate'];
		}
		if(dc.values['serviceID']!='contraBalNumberF' && dc.values['serviceID']!='contraAccNumber' && dc.values['serviceID']!='subLedgerSalaryPayment' && dc.values['serviceID']=='subLedgerSalary' )
		{
			//if(document.getElementById('voucherHeader_voucherDate').value=="" ||document.getElementById('voucherHeader_voucherDate').value==' ')
				document.getElementById('voucherHeader_voucherDate').value=document.getElementById('databaseDate').value;

			if(document.getElementById("chequeDetail_chequeDate").value=="" || document.getElementById("chequeDetail_chequeDate").value==" ")
			  document.getElementById("chequeDetail_chequeDate").value=document.getElementById('databaseDate').value;
		}
		if(!window.data) {
			getData();
			//getAccountNumber();
			//getInHandId();
			window.data=true;
		}
		addSlNo();
		var voucherHeader_voucherDate=dc.values['voucherHeader_voucherDate'];
		if(dc.values['serviceID']!='contraBalNumberF' && dc.values['serviceID']!='contraAccNumber'){
		if(voucherHeader_voucherDate){
		var voucherDate=formatDateToDDMMYYYY6(voucherHeader_voucherDate);
		document.getElementById('voucherHeader_voucherDate').value=voucherDate;
			}
	}
	var chequeDetail_chequeDate=dc.values['chequeDetail_chequeDate'];
	if(chequeDetail_chequeDate){
	chequeDetail_chequeDate=formatDateToDDMMYYYY6(chequeDetail_chequeDate);
	document.getElementById('chequeDetail_chequeDate').value=chequeDetail_chequeDate;
	}
	if(dc.values['serviceID']=='loadSubLedgerSalaryData'){
	selUnSelAll();
		}

	if(dc.values['serviceID'] == 'loadSubLedgerSalaryData' && (dc.values['showMode'] == 'edit'
		|| dc.values['showMode'] == 'view' ||  dc.values['showMode'] == 'modify'))
		{
			var control= document.getElementById('subLedgerPaymentHeader_paidBy');
			for(var i=1;i<control.length;i++)
			{
				try{
					if(control.options[i].value == 0) { control.remove(i); break;}
				}catch(err) { }
			}
		}

	}
	function selUnSelAll() { // For Selecting/notSelecting all Bills.
		var table=document.getElementById('Data_Grid');
		var chkBox,hchkBox;
		hchkBox=PageManager.DataService.getControlInBranch(table.rows[0],"bSelect");
		for(var i=1;i<table.rows.length;i++) {
			chkBox=PageManager.DataService.getControlInBranch(table.rows[i],"billSelect");
			if(hchkBox.checked) chkBox.checked=true;
			else chkBox.checked=false;
		}
			calcTotal();
	}

	function getAccountNumber() {
 		var control= document.getElementById('subLedgerPaymentHeader_bankId');
 		sIndex=null;
 		document.getElementById("acc_Desc").value="";
		if(control.selectedIndex != -1 && control.value.length!=0) {
			var obj=document.getElementById('subLedgerPaymentHeader_branchAccountId');
 			for(i=obj.length-1;i>=0;i--) obj.remove(i);
 			obj.setAttribute('exilListSource','accountListFrom');
 			PageManager.DataService.setQueryField('branchId',control.value);
 			//PageManager.DataService.setQueryField('fundValue',document.getElementById('fund_id').value);
 			PageManager.DataService.callDataService('contraAccNumber');
		}
 	}
	function calcTotal() {
	    var chkBox;
		var tAmountObj;
		var tAmount=0,temp;
		var table=document.getElementById('Data_Grid');
		for(var i=1;i<table.rows.length;i++) {
			chkBox=PageManager.DataService.getControlInBranch(table.rows[i],"billSelect");
			if(chkBox.checked) {
				obj=PageManager.DataService.getControlInBranch(table.rows[i],"billSelectHidden");
				obj.value="ON";
				tAmountObj=PageManager.DataService.getControlInBranch(table.rows[i],"salaryBillDetail_netPay");
				temp=parseFloat(tAmountObj.value);
				if(!isNaN(temp)) tAmount+=temp;
			} else {
			obj=PageManager.DataService.getControlInBranch(table.rows[i],"billSelectHidden");
			obj.value="OFF";
			}
		}
		tAmountObj=document.getElementById('total');
		if(!isNaN(tAmount)) {
			tAmount=Math.round(tAmount*100)/100 ;
			tAmountObj.value=tAmount;
			document.getElementById('drAmount').value=tAmount;
		}
	}

	function verify(obj) { // Verification for Total Amount entered not to exceed then the limit.
		var row=PageManager.DataService.getRow(obj);
		var table=document.getElementById('Data_Grid');
		var net=PageManager.DataService.getControlInBranch(table.rows[row.rowIndex],"salaryBillDetail_netPay");
		var gross=PageManager.DataService.getControlInBranch(table.rows[row.rowIndex],"salaryBillDetail_grossPay");
		var deduc=PageManager.DataService.getControlInBranch(table.rows[row.rowIndex],"salaryBillDetail_totalDed");
		var earPay=PageManager.DataService.getControlInBranch(table.rows[row.rowIndex],"salaryBillDetail_paidAmount");
		if(parseFloat(obj.value) > (parseFloat(gross.innerHTML)-parseFloat(deduc.innerHTML)-parseFloat(earPay.innerHTML))) {
			alert('Cannot pay Amount more than : '+(parseFloat(gross.innerHTML)-parseFloat(deduc.innerHTML)-parseFloat(earPay.innerHTML)));
			obj.value=(parseFloat(gross.innerHTML)-parseFloat(deduc.innerHTML)-parseFloat(earPay.innerHTML));
			obj.focus();
			return;
		}
		if(parseFloat(obj.value)<=0) {
			alert('Enter amount greater than zero');
			obj.value=parseFloat(net.innerHTML)-parseFloat(earPay.innerHTML);
			obj.focus();
			return;
		}
		calcTotal();
	}

	function afterUpdateService(dc)	{
			 disableControls(0,true);
		 	if(str=="new")	window.location = "SubledgerSalaryPayment.htm"
			if(str=="close") window.close();
	}

	function check(objName) {
		subLedgerSalaryPayment.chequeDetail_chequeNumber.value="";
		subLedgerSalaryPayment.chequeDetail_chequeDate.value="";
		var checkedItem=getSelectedRadioValue(document.getElementsByName(objName));
		if(checkedItem=="Others") {
			document.getElementById('lblChequeNo').innerHTML="Document No<span class=leadon>*</span>";
			document.getElementById('lblChequeDate').innerHTML="Document date<span class=leadon>*</span>";
			document.getElementById('chqAvail').style.display="none";
			document.getElementById('chequeDetail_chequeNumber').setAttribute('exilDataType','exilAlphaNumeric');
		} else if(checkedItem=="Cheque")  {
			document.getElementById('lblChequeNo').innerHTML="Cheque No<span class=leadon>*</span>";
			document.getElementById('lblChequeDate').innerHTML="Cheque date<span class=leadon>*</span>";
			document.getElementById('chqAvail').style.display="block";
			document.getElementById('chequeDetail_chequeNumber').setAttribute('exilDataType','exilUnsignedInt');
		}
	}

	function getInHandId() {
		var control= document.getElementById('subLedgerPaymentHeader_paidBy');
		if(control.selectedIndex == 0)  { control.options[0].value=0; return; }
		if(control.selectedIndex != -1) {
			PageManager.DataService.setQueryField('id',control.value);
			PageManager.DataService.callDataService('inHandId');
		}
	}

	function getGrid() {
		var fundObj=document.getElementById('fund_id');
		var fundSourceObj=document.getElementById('fundSource_id');
		if(fundObj.selectedIndex==-1){
			alert("Please select fund");
			return;
		}
		if(fundSourceObj.selectedIndex==-1){
			alert("Please select financing source");
			return;
		}

		var paramFund=fundObj.options[fundObj.selectedIndex].value;
		var paramFundSource=fundSourceObj.options[fundSourceObj.selectedIndex].value;
	//	var chk=document.getElementById('chequeDetail_payTo');
	//	if(!PageValidator.validateElement(chk)) return;
	//	PageManager.DataService.setQueryField('id',subLedgerSalaryPayment.chequeDetail_payTo.value);
		PageManager.DataService.setQueryField('mmonth',subLedgerSalaryPayment.salaryBillDetail_mmonth.value);
		PageManager.DataService.setQueryField('paramFund',paramFund);
		PageManager.DataService.setQueryField('paramFundSource',paramFundSource);
		PageManager.DataService.callDataService('salarySubLedgerPayment');
	}

	function addSlNo(){
		var slNo=1;
		var tabObj=document.getElementById("Data_Grid");
		for(var i=1;i<tabObj.rows.length;i++){
			var obj=PageManager.DataService.getControlInBranch(tabObj.rows[i],"slNo");
			obj.innerHTML=slNo;
			slNo++;
		}
	}

 function drillIt(){

					var mode="view";
					var cgn1=document.getElementById('cgnNum').value
					var cgn2=cgn1.substring(0,3);
					switch(cgn2){

						case 'SAL' :
						window.open("JV_Salary.htm?cgNumber="+cgn1+"&showMode="+mode,"","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");

					}
			}

	function ButtonPress(name)
		 {
		  //paid by made optional, i.e setting default value to 0
		 var control= document.getElementById('subLedgerPaymentHeader_paidBy');
		 if(control.selectedIndex == 0)  { control.options[0].value=0; }

		   //alert(document.getElementById('voucherHeader_id').value+"in button");
		  var sm=PageManager.DataService.getQueryField('showMode');
		  if(sm!='modify')
		  {
		    if(!checkFund())
	  		   return false;
	  		 if(!checkBalance())
		  		return false;
		  }
		  if(sm=='modify')
		  {
			if(!checkFundReverse())
				return false;
		  }
			if(name.toLowerCase()=='savenew')
			str="new";
			if(name.toLowerCase()=='saveclose')
			str="close";
		   var drillDownCgno=PageManager.DataService.getQueryField('drillDownCgn');

		   		if(drillDownCgno)
		   		{
		   			disableControls(0,false);
		   		}
			   else
			   {
				if(!PageValidator.validateForm()) return;
			/*	var modeOfPym=getSelectedRadioValue(document.getElementsByName('subLedgerPaymentHeader_typeOfPayment'));
				if(modeOfPym.toLowerCase()=="cheque") {
					if(!checkChequeDate("chequeDetail_chequeDate"))return;
				}*/
				if(subLedgerSalaryPayment.subLedgerPaymentHeader_narration.value.length>250) {
						alert('Enter Narration less than 250 Charaters');
						subLedgerSalaryPayment.subLedgerPaymentHeader_narration.focus();
						return;
				}
				if(parseFloat(subLedgerSalaryPayment.total.value)<=0) {
						alert("Select some bills to pay");
						return;
					}
				if(parseFloat(subLedgerSalaryPayment.salaryBillDetail_netPay.value)<=0)	{
					alert("Select any salary bill to pay");
					return;
				}
			  }
			    document.getElementById('voucherHeader_voucherDate').setAttribute('exilDataType','');
		 		var dbDate=document.getElementById('databaseDate').value;
				var vhDate=document.getElementById('voucherHeader_voucherDate').value;
				if(compareDate(formatDateToDDMMYYYY1(vhDate),formatDateToDDMMYYYY1(dbDate)) == -1 )
				{
				alert('Voucher Date should be less than or equal to '+dbDate);
				document.getElementById('voucherHeader_voucherDate').focus();
				return false;
				}
				var sm=PageManager.DataService.getQueryField('showMode');
				if(sm=='modify')
				{
				var effDate=document.getElementById('voucherHeader_effDate').value;
				if(compareDate(formatDateToDDMMYYYY1(effDate),formatDateToDDMMYYYY1(dbDate)) == -1 ){
				alert('Voucher Date should be less than or equal to '+dbDate);
				document.getElementById('voucherHeader_effDate').focus();
				return false;
				}
				}
		PageManager.UpdateService.submitForm('subLedgerSalaryPayment');
	}

	function disableControls(frmIndex, isDisable){
			for(var i=0;i<document.forms[frmIndex].length;i++)
			{
				document.forms[frmIndex].elements[i].disabled =isDisable;
				if(PageManager.DataService.getQueryField('showMode')=='view' &&
					document.forms[frmIndex].elements[i].parentNode.parentNode.getAttribute('id')=='backbutton')
					document.forms[frmIndex].elements[i].disabled =false;
				if(PageManager.DataService.getQueryField('showMode')=='modify'
						&& (document.forms[frmIndex].elements[i].parentNode.parentNode.getAttribute('id')=='modGrid' ||
						 document.forms[frmIndex].elements[i].parentNode.parentNode.getAttribute('id')=='submitGrid1' ))
					document.forms[frmIndex].elements[i].disabled =false;
			}
		}

	function reverse()
	{
		var cgn=PageManager.DataService.getQueryField('drillDownCgn');
	if(cgn){
		document.getElementById('reverseRecord').style.display='block';
		var vcObj=document.getElementById('voucherHeader_newVcNo');
		vcObj.setAttribute('exilMustEnter','true');
		vcObj.disabled=false;
		var vdObj=document.getElementById('voucherHeader_effDate')
		vdObj.setAttribute('exilMustEnter','true');
		vdObj.disabled=false;
		var jvcObj=document.getElementById('voucherHeader_newJVcNo');
		jvcObj.disabled=false;
		var bcObj=document.getElementById('diffDebit')
		bcObj.disabled=false;
		document.getElementById('modeOfExec').value="modify";
		//alert(document.getElementById('modeOfExec').value);
		document.getElementById('submitGrid').style.display ="none";
		document.getElementById('submitGrid1').style.display ="block";
		var canbut = document.getElementsByName('can');

				  for(var i=0;i<canbut.length;i++)
				   {
					 canbut[i].style.display = "none";
	   						}
	}
		}
		function showglEntry()
		{
			hideColumns(0);
			displayColumn(1);
		    displayColumn(2);
		    displayColumn(3);
		    displayColumn(4);
		    displayColumn(5);
			if(!PageValidator.validateForm())
				return false;
			PageManager.DataService.setQueryField("showGlEntries","show");
			PageManager.DataService.setQueryField("showJVGlEntries","no");
			var accNumberObj=document.getElementById("subLedgerPaymentHeader_branchAccountId");
			var accNumberType=accNumberObj.options[accNumberObj.selectedIndex].value
			PageManager.DataService.setQueryField("accountNumberId",accNumberType);
			totalAmount();
			PageManager.DataService.setQueryField("fund_id",document.getElementById("fund_id").value);
			//alert(document.getElementById("fundSub_id").value);
			PageManager.DataService.setQueryField("fund1_id",document.getElementById("fundSub_id").value);
			PageManager.DataService.callDataService('subLedgerSalaryPayment');
		}

		function totalAmount()
		{
			var dataTable= document.getElementById("Data_Grid");
				var found,total,tAmount=0,temp;

				for(var i=1;i<dataTable.rows.length; i++)
				{
				var chkBox=PageManager.DataService.getControlInBranch(dataTable.rows[i],"billSelect");
				if(chkBox.checked) {
					total=PageManager.DataService.getControlInBranch(dataTable.rows[i],"salaryBillDetail_netPay");
					temp=parseFloat(total.value);
					if(!isNaN(temp)) tAmount+=temp;
								}
				}

			PageManager.DataService.setQueryField("tAmount",tAmount);
		}

		function showEntry()
		{    // alert("came");
				var trObj;
				var tObj=document.getElementById("showEntries");
				var cr=0,dr=0;
				tObj.style.display="block";
				var tableObj=document.getElementById("entries");
				for(var i=tableObj.rows.length-1;i>=2;i--)
				{
					tableObj.deleteRow(i);
				}
				var Obj=PageManager.DataService.getControlInBranch(tableObj.rows[1],"display_Code");
				trObj=PageManager.DataService.getRow(Obj);
				var iRow=glNameCode.split(";");
				var rowContents=null;tempObj=null;
				for(var i=1;i<(iRow.length)-1;i++)
				{
					rowContents=iRow[i].split("^");
					if(i==1){
					newRow=trObj;
					tempObj1=PageManager.DataService.getControlInBranch(newRow,'display_CodeType');
					tempObj1.innerHTML=rowContents[0];
					tempObj2=PageManager.DataService.getControlInBranch(newRow,'display_Code');
					tempObj2.innerHTML=rowContents[1];
					tempObj3=PageManager.DataService.getControlInBranch(newRow,'display_Head');
					tempObj3.innerHTML=rowContents[2];
					tempObj4=PageManager.DataService.getControlInBranch(newRow,'display_Debit');
					tempObj4.innerHTML=rowContents[3];
					tempObj5=PageManager.DataService.getControlInBranch(newRow,'display_Credit');
					tempObj5.innerHTML="0";



					tempObj6=PageManager.DataService.getControlInBranch(newRow,'display_Narration');
					tempObj6.innerHTML=" -";
					}else{
					var newRow=trObj.cloneNode(true);
					newRow=tableObj.tBodies[0].appendChild(newRow);
					tempObj1=PageManager.DataService.getControlInBranch(newRow,'display_CodeType');
					tempObj1.innerHTML=rowContents[0];
					tempObj2=PageManager.DataService.getControlInBranch(newRow,'display_Code');
					tempObj2.innerHTML=rowContents[1];
					tempObj3=PageManager.DataService.getControlInBranch(newRow,'display_Head');
					tempObj3.innerHTML=rowContents[2];
					if(rowContents[0]!='credit')
					{
					tempObj4=PageManager.DataService.getControlInBranch(newRow,'display_Debit');
					tempObj4.innerHTML=rowContents[3];
					tempObj5=PageManager.DataService.getControlInBranch(newRow,'display_Credit');
					tempObj5.innerHTML="0";
					}
					else
					{
					tempObj4=PageManager.DataService.getControlInBranch(newRow,'display_Debit');
					tempObj4.innerHTML="0";
					tempObj5=PageManager.DataService.getControlInBranch(newRow,'display_Credit');
					tempObj5.innerHTML=rowContents[3];

					}


					tempObj6=PageManager.DataService.getControlInBranch(newRow,'display_Narration');
					tempObj6.innerHTML=" -";
					}

				}
				var totalamount=document.getElementById('total').value;

			/*	for(var i=1;i<tableObj.rows.length;i++)
				{
					var typeObj=PageManager.DataService.getControlInBranch(tableObj.rows[i],"display_CodeType");
					var type=typeObj.innerHTML;
					if(type =='credit')
					{
						var trObj=PageManager.DataService.getRow(typeObj);
						col1=PageManager.DataService.getControlInBranch(trObj,'display_Credit');
						col1.innerHTML=totalamount;
						col2=PageManager.DataService.getControlInBranch(trObj,'display_Debit');
						col2.innerHTML="0";
					}
				}
				for(var i=1;i<tableObj.rows.length;i++)
				{
					var typeObj=PageManager.DataService.getControlInBranch(tableObj.rows[i],"display_CodeType");
					var type=typeObj.innerHTML;
					if(type =='debit')
					{
						var trObj=PageManager.DataService.getRow(typeObj);
						col1=PageManager.DataService.getControlInBranch(trObj,'display_Credit');
						col1.innerHTML="0";
						col2=PageManager.DataService.getControlInBranch(trObj,'display_Debit');
						col2.innerHTML=totalamount;
					}
				}*/

				 var dSum=0;
				 var cSum=0;
				for(var i=1;i<tableObj.rows.length;i++)
				{

				  var dObj=PageManager.DataService.getControlInBranch(tableObj.rows[i],"display_Debit");
				  var cObj=PageManager.DataService.getControlInBranch(tableObj.rows[i],"display_Credit");
				 if(!isNaN(parseFloat(dObj.innerHTML)))
				 {
				   var sum=(parseFloat(dObj.innerHTML));
				   dSum=dSum+sum;
				 }
				 if(!isNaN(parseFloat(cObj.innerHTML)))
				 {
				   var sum=(parseFloat(cObj.innerHTML));
				   cSum=cSum+sum;
				 }
				}
				var newRow=trObj.cloneNode(true);
				newRow=tableObj.tBodies[0].appendChild(newRow);
				objt1=PageManager.DataService.getControlInBranch(newRow,'display_Code');
				objt2=PageManager.DataService.getControlInBranch(newRow,'display_Head');
				objt3=PageManager.DataService.getControlInBranch(newRow,'display_Debit');
				objt4=PageManager.DataService.getControlInBranch(newRow,'display_Credit');
				objt5=PageManager.DataService.getControlInBranch(newRow,'display_Narration');
				objt1.innerHTML=" ";
				objt2.innerHTML=" ";
				objt3.innerHTML=dSum;
				objt4.innerHTML=cSum;
				objt5.innerHTML=" ";

			}

			function hideColumns(index)
			{
				var table=document.getElementById('entries');
			   	for(var i=0;i<table.rows.length;i++){
					table.rows[i].cells[index].style.display="none";
			   	}
			}
function onClickCancel()
{
window.location="SubledgerSalaryPayment.htm";
}

function getDetails(obj)
{

	var row=PageManager.DataService.getRow(obj);
	var table=document.getElementById('Data_Grid');
	var vouNum=PageManager.DataService.getControlInBranch(table.rows[row.rowIndex],"voucherHeader_voucherNumber1");
	vouNum=vouNum.innerHTML;
	PageManager.DataService.setQueryField('vouNumber',vouNum);
	PageManager.DataService.callDataService('getCgn');

}

	function loadBankBalance()
	{
		var ctr= document.getElementById('subLedgerPaymentHeader_branchAccountId');
		accntMod(ctr);
		loadFund(ctr);//Get the Fund related to this id
		var voucherHeader_voucherDate=document.getElementById('voucherHeader_voucherDate').value;
		    if(!voucherHeader_voucherDate)
		   {
		    	alert("Please select the Voucher Date ");
		    	return;
		   }
		   if(ctr.selectedIndex != -1){
		     var bal_from=ctr.options[ctr.selectedIndex].value;
		     PageManager.DataService.setQueryField('voucherHeader_voucherDate',voucherHeader_voucherDate);
		     PageManager.DataService.setQueryField('bal_from',bal_from);
		     PageManager.DataService.callDataService('contraBalNumberF');
			}
	}
	function checkBalance()
	{

	    var amt=document.getElementById('total').value;
		var bal=document.getElementById("bank_bal").value;
		bal=isNaN(bal)?0:bal;
		var finalBal=bal-amt;
		if(finalBal<0)
		{
		  if(!confirm("WARNING:  Insufficient Balance in Bank-Account"))
		    return false;
		}
		return true;
	}

		function accntMod(obj)
		{	//alert("inside accntMod..");
			try{
			if(obj.selectedIndex==-1)	 return;
			 if(sIndex!=null)
			{
					obj.options[sIndex]= new Option(sText,sValue);
			}

			var text=obj.options[obj.selectedIndex].innerHTML;
		    var temp=text.split(" -- ");
			sIndex=obj.selectedIndex;
			sValue=obj.options[obj.selectedIndex].value;
			sText=text;
			//alert(obj.selectedIndex+"  text:"+text);
			if(!temp[1])
		      temp[1]=" ";
			//alert("gg"+temp[1]);
			 document.getElementById("acc_Desc").value=temp[1];
			if(temp[1]!=null && temp[1]!="" )
		   {
		     obj.options[obj.selectedIndex].text=temp[0];
		   }
		   }catch(err) {}
		}
	function checkFund()
	{
		if(document.getElementById('fund_id').value!=document.getElementById('fundSub_id').value)
		  if(!confirm("WARNING:This will be an Inter Fund Transfer."))
			    return false;
		else{
			if(document.getElementById("jv_voucherNumber").value.length==0){
				alert("Enter value for Journal Voucher Number..");
				return false;
			}
		}

		return true;
	}
	function loadFund(obj)
	{
		if(obj.selectedIndex==-1) return;
	//	accntMod(obj);
		var accId=obj.options[obj.selectedIndex].value;
		//alert(accId+"text"+obj.options[obj.selectedIndex].text);
		PageManager.DataService.setQueryField('bankIdForFund',accId);
		PageManager.DataService.callDataService('AccountFundMap1');
	}
	function checkFundReverse()
	{
	    if(document.getElementById('fund_id').value!=document.getElementById('fund1_id').value)
	    {
			if(document.getElementById("voucherHeader_newJVcNo").value.length==0){
				alert("Enter value for Journal Voucher Number.");
				document.getElementById("voucherHeader_newJVcNo").focus();
				return false;
			}

		}
		else
			document.getElementById("voucherHeader_newJVcNo").value='';

		return true;
	}
function showJVglEntry()
{
//alert("WO Fund:"+document.getElementById('fund_id').value+" Bank Fund:"+bankFundis)
	var fundObj=document.getElementById('fund_id');
	var fund_name=fundObj.options[fundObj.selectedIndex].text;
	 if(fund_name==document.getElementById('fund1_name').value)
	 {
		alert("There is no Journal Entry passed.");
		hideColumn(1);
		hideColumn(2);
		hideColumn(3);
		hideColumn(4);
		hideColumn(5);
		return;
	 }
	 else{
	 	hideColumn(0);
	 	displayColumn(1);
	 	displayColumn(2);
	 	displayColumn(3);
	 	displayColumn(4);
	 	displayColumn(5);

		if(!PageValidator.validateForm())
			return false;
		PageManager.DataService.setQueryField("showGlEntries","show");
		PageManager.DataService.setQueryField("showJVGlEntries","yes");
		PageManager.DataService.setQueryField("showGlEntries","show");
		var accNumberObj=document.getElementById("subLedgerPaymentHeader_branchAccountId");
		var accNumberType=accNumberObj.options[accNumberObj.selectedIndex].value
		PageManager.DataService.setQueryField("accountNumberId",accNumberType);
		totalAmount();
		PageManager.DataService.setQueryField("fund_id",document.getElementById("fund_id").value);
		//alert(document.getElementById("fundSub_id").value);
		PageManager.DataService.setQueryField("fund1_id",document.getElementById("fundSub_id").value);
		PageManager.DataService.callDataService('subLedgerSalaryPayment');
	}
}
function displayColumn(index)
{
	var table=document.getElementById('entries');
   	for(var i=0;i<table.rows.length;i++){
		table.rows[i].cells[index].style.display="block";
   	}
}
function hideColumn(index)
{
	var table=document.getElementById('entries');
   	for(var i=0;i<table.rows.length;i++){
		table.rows[i].cells[index].style.display="none";
   	}
}

function nextChqNo()
{
	var obj=document.getElementById("subLedgerPaymentHeader_branchAccountId");
	var bankBr=document.getElementById("subLedgerPaymentHeader_bankId");
	if( bankBr.selectedIndex==-1)
	{
	  alert("Select Bank Branch and Account No!!");
	  return;
	}

	if(obj.selectedIndex==-1)
	{
	  alert("Select Account No!!");
	  return;
	}
	var accNo=obj.options[obj.selectedIndex].text;
	var accNoId=obj.options[obj.selectedIndex].value;
	var sRtn =showModalDialog("SearchNextChqNo.html?accntNo="+accNo+"&accntNoId="+accNoId,"","dialogLeft=300;dialogTop=210;dialogWidth=305pt;dialogHeight=300pt;status=no;");
	if(sRtn!=undefined ) document.getElementById("chequeDetail_chequeNumber").value=sRtn;
}
function resetChequeDetails(){
		for(var ii=0;ii<subLedgerSalaryPayment.subLedgerPaymentHeader_typeOfPayment.length;ii++){
			if(subLedgerSalaryPayment.subLedgerPaymentHeader_typeOfPayment[ii].value=='Cheque'){
				subLedgerSalaryPayment.subLedgerPaymentHeader_typeOfPayment[ii].checked=true;
			}
		}
	subLedgerSalaryPayment.chequeDetail_chequeNumber.value="";
	subLedgerSalaryPayment.chequeDetail_chequeDate.value="";
}
</script>
</head>

<body bgcolor="#ffffff" bottommargin="0" topmargin="0" rightmargin="0" leftmargin="0" marginheight="0" marginwidth="0" onLoad="onLoadTasks();" onKeyDown ="CloseWindow(event); " ><!------------------ Header Begins Begins--------------------->
<!--  table><tr><td><div id="main"><div id="m2"><div id="m3" -->
<form name="subLedgerSalaryPayment">
	<input type=hidden name=databaseDate  id=databaseDate>
	<input type=hidden name="fund1_id" id="fund1_id" value="" class="fieldinput" >
	<input type=hidden name="fundSub_id" id="fundSub_id" value="" class="fieldinput" >
	<input type="hidden" name="relationTypeId" id="relationTypeId" value="">
	<input type=hidden name="cvType" id="cvType" value="J">
	<input type=hidden id="modeOfExec" name="modeOfExec" value="new">
	<input type="hidden" name="tType" id="tType" value="P">
	<input type="hidden" name="cgnNum" id="cgnNum">
	<input type="hidden" name="drAmount" id="drAmount" value=0>
	<input type="hidden" name="voucherHeader_id" id="voucherHeader_id">
	<input type="hidden" name="voucherHeader_cgn" id="voucherHeader_cgn">
<input type="hidden" name="oldVoucherDate" id="oldVoucherDate">
	<table width="100%" border=0 cellpadding="3" cellspacing="0" height="93">
		<!-- tr class="tableheader">
			<td  valign="center" colspan="2"  height="16"><span >
            Salary Payment</span></td><td  valign="center" colspan="2" align="right"><a href='#' onclick=newWindow('../HTML/AddAccountCode.htm') ><span class="link">Add Account Code</span></a></td>
		</tr -->
		<tr  style="DISPLAY: none">
			<td height="22" align="right"><div align="right" class="labelcell">Type<span class="leadon">*</span></div></td>
			<td  height="22" >
				<div class="fieldcell"><input readonly name="pay_type" class="fieldinput"
      id="pay_type"  align="left" value="Salary" exilDataType="exilAnyChar" ></div></td>
			<td colspan=2></td>
		</tr>
		<tr >
			<td  align="right"><div align="right" class="labelcell" >
              Month<SPAN class=leadon>*</SPAN></div></td>
			<td  width="25%" align="left"><div class="smallfieldcell">
				<SELECT id="salaryBillDetail_mmonth" name="salaryBillDetail_mmonth" onChange="hide();" tabindex=1 style="width:141; height:17">
					<OPTION value="1" SELECTED>January</OPTION><OPTION value="2">February</OPTION><OPTION value="3">March</OPTION><OPTION value="4">April</OPTION>
					<OPTION value="5">May</OPTION><OPTION value="6">June</OPTION><OPTION value="7">July</OPTION><OPTION value="8">August</OPTION>
					<OPTION value="9">September</OPTION><OPTION value="10">October</OPTION><OPTION value="11">November</OPTION><OPTION value="12">December</OPTION>
				</SELECT></div>
			</td>
			<!-- <td width="25%" align="right"  class="labelcell" ><div>Pay To<span class="leadon">*</span></div></td>
			<td width="25%" class="fieldinput"  align="left">
				<select class="fieldinput" id="chequeDetail_payTo" style="LEFT: 2px; WIDTH: 130px; TOP: 3px" name="chequeDetail_payTo" onChange="hide();"
      exilDataType="exilAlphaNumeric" exilListSource="departmentList"
      exilMustEnter="true">
				</select>
			</td> -->
			<td class="fieldinput"  align="left">&nbsp;</td>
			<td  class="fieldinput"  align="left">&nbsp;</td>
		</tr>

		<tr >
			<td align="right"><div  class="labelcell" >
              Fund<SPAN class=leadon>*</SPAN></div></td>
			<td  align="left">
				<div class="smallfieldcell"><SELECT name="fund_id" id="fund_id" class="fieldinput" tabindex=1
				  onchange="getBanks()"  exilListSource="fundName"      exilMustEnter="true">
				</SELECT></div>
			</td>
	<!--		<td width="25%" align="right"  class="labelcell" ></td>
			<td width="25%" class="fieldinput"  align="left">
			</td> -->
			<td align="right" ><div class="labelcell" >Financing Source</div></td>
			<td align="left"><div class="smallfieldcell"><SELECT name="fundSource_id" id="fundSource_id" class="fieldinput"
				  exilListSource="fundSourceName" tabindex=1>
				</SELECT></div>


		</tr>

		<tr  id="filterrow1">
			<td colspan="4" align="middle"  height="18" ><!-- Buttons Start Here -->
				<table align="center" border="0" cellpadding="0" cellspacing="0">
	 				<tr id="reverseSubmit">
	 						<td width=100% align=center>
		 						<input type="button"  value="Search" class="button" tabindex=1 onclick="getGrid();"/>
	 						</td>
					</tr>
				</table><!-- Buttons End Here -->
			</td>
		</tr>
	</table>
	<DIV name="trnHeader" id="trnHeader" style="DISPLAY: none">
	<TABLE width="100%"  border="0" cellpadding="0" cellspacing="0">
		<tr>
    	   	<td>
        	   	<table width="100%" border="1" cellpadding="0" cellspacing="0" name="Data_Grid" id="Data_Grid">
            	   	<tr class="thStlyle">
                	   	<td width="5%" class=""><div align="center" >Sl No</div></td>
                        <td width="10%" ><div align="center">Voucher No</div></td>
                        <td width="15%" ><div align="center">Voucher Date</div></td>
                        <td width="10%" ><div align="center">Gross Amount</div></td>
                        <td width="10%" ><div align="center">Recovery/Deduction</div></td>
                        <td width="10%" ><div align="center">Earlier Payment</div></td>
						 <td width="5%" ><div align="center">Select<input type=checkbox id="bSelect" name="bSelect" onClick="selUnSelAll();" value="ON" tabindex=1></div></td>
                        <td width="10%" ><div align="center">Net</div></td>
                    </tr>
                    <tr class="labelcell">
                    	<td><div id="slNo" name="slNo" align="center">1</div></td>
					<!--	<td align="middle"><A onClick="getDetails(this)" href="#"><div id="voucherHeader_voucherNumber1" name="voucherHeader_voucherNumber1"></div></a>-->
                    	<td align="middle"><div id="voucherHeader_voucherNumber1" name="voucherHeader_voucherNumber1"></div>
                        	<input type="hidden" id="salaryBillDetail_id" name="salaryBillDetail_id" exilDataType="exilAnyChar">
                        	<input type="hidden" id="voucherHeaderId" name="voucherHeaderId" exilDataType="exilAnyChar"></td>
                        <td align="middle"><div id="voucherHeader_voucherDate1" name="voucherHeader_voucherDate1"></div></td>
                        <td align="right"><div id="salaryBillDetail_grossPay" name="salaryBillDetail_grossPay"></div></td>
                        <td align="right"><div id="salaryBillDetail_totalDed" name="salaryBillDetail_totalDed"></div></td>
                        <td align="right"><div id="salaryBillDetail_paidAmount" name="salaryBillDetail_paidAmount"></div></td>
						 <td align="middle"><input type="hidden" name="billSelectHidden" id="billSelectHidden"><input type=checkbox id="billSelect" name="billSelect" value="1" onClick="calcTotal();" tabindex=-1></td>
                        <td><div class=fieldcell align="right">
							<input class="fieldinput-right" id="salaryBillDetail_netPay" value="0" onBlur="verify(this);" name="salaryBillDetail_netPay" exilDataType="exilSignedDecimal" tabindex=""></div></td>

            		</tr>
				</table>
				<table width="100%">
					<tr >
						<td  align=right><span>Total &nbsp;</span><span class="fieldcell"><input readonly class="fieldinput-right" id="total" name="total" value="0" ></span>
			</td>
		</tr>
		</table>
			</td>
		</tr>
	</TABLE>

	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td valign="top" ><!------------Content begins here ------------------>
				<table width="100%" border="0" cellpadding="3" cellspacing="0">
					<TBODY>
						<tr >
        					<td colspan="4" width="100%">&nbsp;</td>
         				</tr>
						<tr >
							<td  id="cgnLabel" name="cgnLabel" style="DISPLAY: none"><div align="right" valign="center" class="labelcell" > CG&nbsp;Number</div></td>
							<td  id="cgnText" name="cgnText" style="DISPLAY: none">
                            <div class="fieldcell"><input readonly name="voucherHeader_cgvn" class="fieldinput" id="voucherHeader_cgvn" ></div></td>
							<td align="right"><div align="right" valign="center" class="labelcell"> Voucher&nbsp;Number<span class="leadon">*</span></div></td>
							<td>
							<table cellpadding="0" cellspacing="0">
							  		<tr class=fieldcell>
							  		<td><input name="voucherHeader_voucherNumberPrefix" maxlength="2" class="fieldinput-left" id="voucherHeader_voucherNumberPrefix" readonly style="display:none" style="width:25px" SIZE="1"></td>
							  		<td>
									<input name="voucherHeader_voucherNumber" maxlength="10" class="fieldinput-left" id="voucherHeader_voucherNumber"  exilMustEnter="true" exilDataType="exilAlphaNumeric" tabindex=1 size="27"></td>
							  		</tr>
							</table>
						</tr>
						<tr >
							<td align="right"><div align="right" valign="center" class="labelcell">Paid By<span class="leadon"></span></div>	</td>
							<td><div class="smallfieldcell"><SELECT class="fieldinput"
            name="subLedgerPaymentHeader_paidBy" exilDataType="exilAlphaNumeric"
            id="subLedgerPaymentHeader_paidBy" onChange="getInHandId();"
            exilListSource="billCollectorList"  tabindex=1
           ></SELECT></div></td>
							<td><div align="right" valign="center" class="labelcell">Voucher Date<span class="leadon">*</span></div></td>
							<td><span class=smallfieldcell><input name="voucherHeader_voucherDate" class="datefieldinput" id="voucherHeader_voucherDate" size="15" onkeyup="DateFormat(this,this.value,event,false,'3')"
                        exilMustEnter="true"  exilDataType="exilAnyDate" exilCalendar="true" tabindex=1></span> </td>
						</tr>
						<tr >
							<td align="right"><div align="right" valign="center" class="labelcell" >Bank<span class="leadon">*</span></div></td>
							<td ><div class="smallfieldcell">
								<SELECT id="subLedgerPaymentHeader_bankId" name="subLedgerPaymentHeader_bankId" onChange="getAccountNumber();" class="" exilListSource="bankAndBranchList" exilMustEnter="true" style="width:246; height:16" tabindex=1></SELECT></div></td>
							<td><div align="right" valign="center" class="labelcell">Account Number<span class="leadon">*</span></div></td>
							<td ><span class="smallfieldcell" ><SELECT id="subLedgerPaymentHeader_branchAccountId" name="subLedgerPaymentHeader_branchAccountId" class="fieldinput" onChange="resetChequeDetails();loadBankBalance()"  exilMustEnter="true"  tabindex=1></SELECT></span>
								<span class=smallfieldcell><input type="text" id="acc_Desc" name="acc_Desc" class=""  readonly ></span></td>
						</tr>

							<tr  id="bankbal">
							  <td align="right"><div align="right" valign="center" class="labelcell"> Bank Balance</div></td>
							  <td>
								<span class=fieldcell><input  name="bank_bal" id="bank_bal" class="fieldinput" tabindex=-1 readonly ></span>
							  </td>
							  <td ><div align="right" valign="center" class="labelcell"> Bank Fund</div></td>
							  <td>
					  			<span class=fieldcell><input name="fund1_name" id="fund1_name" class="fieldinput" tabindex=-1 readonly></span>
							  </td>
                            </tr>

						<tr >
						<td width="224" align="right"><div align="right" valign="center" class="labelcell"> Mode of Payment<span class="leadon">*</span></div>	</td>
							<td class="labelcell" width="233">
								<!-- <input type="radio" value="Cash" id="subLedgerPaymentHeader_typeOfPayment" name="subLedgerPaymentHeader_typeOfPayment"  checked onClick="check(this);">Cash -->
								<input type="radio" value="Cheque" id="subLedgerPaymentHeader_typeOfPayment" name="subLedgerPaymentHeader_typeOfPayment"  checked onClick="check('subLedgerPaymentHeader_typeOfPayment');">Cheque
								<input type="radio" value="Others" id="subLedgerPaymentHeader_typeOfPayment" name="subLedgerPaymentHeader_typeOfPayment" onClick="check('subLedgerPaymentHeader_typeOfPayment');">Others
							</td>
							<td colspan="2" width="436"></td>
							<!-- input type=hidden id="subLedgerPaymentHeader_typeOfPayment" name="subLedgerPaymentHeader_typeOfPayment" value="Cheque" -->
						</tr>

						<tr >
							<td width="191" align="right"><div align="right" valign="center" class="labelcell" id="lblChequeNo" name="lblChequeNo">Cheque No<span class="leadon">*</span></div></td>
							<td>
								<table width="25%" class=fieldcell>
									<tr><td width="273"><input name="chequeDetail_chequeNumber" class="fieldinput" id="chequeDetail_chequeNumber" maxLength="10" exilDataType ="exilAlphaNumeric" exilMustEnter="true"></td>
										<td valign="center" title="Show Next Cheque Number"  nowrap id="chqAvail"><A onclick=nextChqNo() href="#" tabindex=""><IMG height=22 src="../images/arrowright.gif" width=22></A></td>
									<!--	<td bgcolor="#fe0000" valign="center" nowrap id="chqAvail"><A class=buttonprimary id=savenClose onclick=nextChqNo() href="#">Show Next Cheque No.</A></td>  -->
									</tr>
								</table>
							</td>

							<td ><div align="right" valign="center" class="labelcell" id="lblChequeDate" name="lblChequeDate">Cheque Date<span class="leadon">*</span></div>	</td>
							<td><span class=smallfieldcell><input name="chequeDetail_chequeDate" class="datefieldinput"
            id="chequeDetail_chequeDate" size="15" onkeyup="DateFormat(this,this.value,event,false,'3')"
             exilDataType="exilAnyDate" exilCalendar="true" exilMustEnter="true"  tabindex=1></span> </td>
						</tr>
						<tr >
						    <td align="right" valign="center"><div align="right" class=labelcell>
								Journal Voucher Number<br>&nbsp; <sup>(applicable only in case of Inter Fund Transfer)</sup></div>
							</td>
							<td>
							  <table cellpadding="0" cellspacing="0">
						  		<tr class=fieldcell>
						  		<td><input name="jv_voucherNumberPrefix" maxlength="2" class="fieldinput-left" id="jv_voucherNumberPrefix" readonly style="display:none" style="width:25px" SIZE="1"></td>
						  		<td><input name="jv_voucherNumber" maxlength="10" class="fieldinput-left" id="jv_voucherNumber"  exilDataType="exilAlphaNumeric" SIZE="20" tabindex=1></td>
						  		</tr>
						  	 </table>
							</td>						<!--	<td width="224"><span align="right" valign="center" class="labelcell" >Cash In Hand</span></td>
							<td width="233"><input class="fieldinput" id="billCollector_cashInHandDesc" name="billCollector_cashInHandDesc" readonly ><input type="hidden" id="billCollector_cashInHand" name="billCollector_cashInHand"></td>-->
							<td><DIV align="right" valign="center" class="labelcell" >Narration</DIV></td>
							<td ><TEXTAREA class=narrationfieldinput id=subLedgerPaymentHeader_narration name=subLedgerPaymentHeader_narration rows=3 cols=19 exilDataType="exilAnyChar" maxLength="250" tabindex=1></TEXTAREA></td>

						</tr>
						<tr  style="display:none">
							<td ><div class="labelcell" valign="center" align="right">Cheque In Hand Code</div></td>
							<td ><input class="fieldinput" id="billCollector_chequeInHandDesc" name="billCollector_chequeInHandDesc" tabindex=-1 readonly><input type="hidden" id="billCollector_chequeInHand" name="billCollector_chequeInHand"></td>
							<td >&nbsp;</td>
							<td >&nbsp;</td>
						</tr>
						</TBODY>
				</table>
			</td>
		</tr>
		<tr >
			<td height="25" colspan="4" valign="bottom" class="smalltext"><p class="smalltext"><span class="leadon">*</span>
				- Mandatory Fields            </p></td>
		</tr><!--  Buttons for Request Form starts here -->
		</table>
		<table border="0" cellpadding="0" cellspacing="0" align="center" id=TABLE1 width="100%">
		<TBODY>
		<tr >
			<td colspan="4" align="middle"><!-- Buttons Start Here -->
				<table border="0" cellpadding="0" cellspacing="0" id=TABLE1 >
					<tbody>
					<tr id="modGrid">
										<td align="center" width=100% colspan=4>
										<input   type="button" class="button" value="Reverse" tabindex=1 onclick=reverse(); />
										</td>
								</tr>
								<tr id="backbutton" >
									<td width=100% align=center colspan=4>
									<input   type="button" class="button" value="Back" tabindex=1 onclick="back(window.self)" />

									</td>
								</tr>
						</tbody>
						</table>
						<table>
										<tr id="reverseRecord"  style="DISPLAY: none">
											<td  align="right"><span  align="right" valign="center" class="labelcell" style="width:175">Payment Voucher Number<SPAN class=leadon>*</SPAN></span></td>
											<td><span class=smallfieldcell><input name="voucherHeader_newVcNo" id="voucherHeader_newVcNo" maxlength="10"  style=" HEIGHT: 22" size="10"  exilDataType="exilAlphaNumeric"> </span></td>
											<td align="right" valign="center"><span  valign="center" class="labelcell">Journal Voucher Number</span>
											<td><span class=smallfieldcell><input name="voucherHeader_newJVcNo" id="voucherHeader_newJVcNo" maxlength="10"  style="HEIGHT: 22" size="10" exilDataType="exilAlphaNumeric"> </span></td>
											<td align="right"><span   valign="center" class="labelcell" style="width:100" >Voucher Date<span class="leadon">*</span></td>
											<td><span class=smallfieldcell><INPUT class   ="datefieldinput"	name="voucherHeader_effDate" id="voucherHeader_effDate"onkeyup="DateFormat(this,this.value,event,false,'3')" exilDataType="exilAnyDate"  style="WIDTH: 101px; HEIGHT: 19px" size="13"   exilCalendar="true"></span></td>
											<td><INPUT  type=hidden class="datefieldinput" name="diffDebit" id="diffDebit" style   ="WIDTH: 101px; HEIGHT: 19px" size="13"></span></td>
										</tr>

										<tr>
										  <td colspan=4></td>
										</tr>
						</table>
			</td>
		</tr></TBODY></table>
						<table align="center" border="0" cellpadding="0" cellspacing="0">
					 				<tr id="submitGrid1" style="display:none">
					 						<td width=100% align=center>
						 						<input type="button"  id="revsave" value="Submit" class="button" tabindex=1 onclick="return ButtonPress('saveclose');"/>
						 						<input type="button" id="revclose" value="Close" class="button"  tabindex=1 onclick="window.close();" />
					 						</td>
									</tr>
							</table>
							<table border="0" cellpadding="0" cellspacing="0"  align="center">
							 <tr id="submitGrid">
							 <td>
							 <input  id="saveandnew" type="button" class="button" value="Save & New" tabindex=1 onclick="return ButtonPress('savenew');"/>
							 <input   type="button" class="button" value="Save & Close" tabindex=1 onclick="return ButtonPress('saveclose');" />
							 <input   type="button" class="button" value="Cancel" tabindex=1 onclick="onClickCancel()" />
							 <input   type="button" class="button" value="Close" tabindex=1 onclick=window.close(); />
							 <input   type="button" class="button" value="Show GlEntry" tabindex=1 onclick=showglEntry(); />
							  <input   type="button" class="button" value="Show JV" tabindex=1 onclick=showJVglEntry(); />
							 </td>
						</tr></table>



			</DIV>
			<table width="100%" border=0 cellpadding="3" cellspacing="0" id="showEntries" name="showEntries" style="DISPLAY: none">
					<tr >
					<td colspan=4>
					<table width="100%" align=center border="0" cellpadding="0" cellspacing="0" >
					<tr  height="25">
					 <TD class=displaydata align=center ><h4>GLEntry</h4></TD></tr>
					</table>
					</td>
					</tr>
					<tr><td>
					<table width="80%" border="1" cellpadding="0" cellspacing="0" align=center id="entries" name="entries">
					<tr class="thStlyle">
						<td><div align="center" valign="center" > Code Type</div></td>
						<td><div align="center" valign="center" > Account Code</div></td>
						<td  ><div align="center" valign="center" > Account Head</div></td>
						<td  ><div align="center" valign="center" > Debit </div></td>
						<td  ><div align="center" valign="center" > Credit</div></td>
						<td  ><div align="center" valign="center" > Narration</div></td>
					</tr>
					<tr class="labelcell">
						<td ><div name="display_CodeType"  id="display_CodeType"   readOnly maxLength=10 tabIndex=0>&nbsp;</div></td>
						<td ><div name="display_Code"  id="display_Code"   readOnly maxLength=10 tabIndex=0>&nbsp;</div></td>
						<td ><div name="display_Head"  id="display_Head"  readOnly maxLength=10 tabIndex=0>&nbsp;</div></td>
						<td ><div name="display_Debit"  id="display_Ddebit"  readOnly maxLength=10 tabIndex=0>&nbsp;</div></td>
						<td ><div name="display_Credit"  id="display_Credit"  readOnly maxLength=10 tabIndex=0>&nbsp;</div></td>
						<td ><div name="display_Narration" id="display_Narration"  readOnly maxLength=10 tabIndex=0>&nbsp;</div></td>
					</tr>
					</table>
					</td>
					</tr>
			</table>
		</form>
<!-- /div></div></div></td></tr></table -->
		</body>
</html>

/*
 * @(#)DocumentObject.java 3.0, 17 Jun, 2013 11:54:19 AM
 * Copyright 2013 eGovernments Foundation. All rights reserved. 
 * eGovernments PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
 */
package org.egov.infstr.docmgmt;

import java.io.Serializable;
import java.util.Date;
import java.util.HashSet;
import java.util.Set;

import org.apache.jackrabbit.JcrConstants;
import org.apache.jackrabbit.ocm.mapper.impl.annotation.Collection;
import org.apache.jackrabbit.ocm.mapper.impl.annotation.Field;
import org.apache.jackrabbit.ocm.mapper.impl.annotation.Node;
import org.egov.infstr.annotation.Search;

/**
 * The Class DocumentObject.
 * Base class for all Document Objects.
 */
@Node(jcrMixinTypes = JcrConstants.MIX_VERSIONABLE)
public class DocumentObject implements Serializable {
	
	/** The Constant serialVersionUID. */
	private static final long serialVersionUID = 1L;
	
	/** The Constant ESCAPE_CHAR. IP address Escape character*/
	public static final String ESCAPE_CHAR = "-";
	
	/** The path. OCM specific to set the document path*/
	@Field(path = true)
	protected String path;
	
	/** The jcr uuid. Unique Id auto generated by JCR while saving a document*/
	@Field(uuid = true)
	protected String jcrUUID;
	
	/** The document number. Application specific Unique Identification number for document*/
	@Field(jcrMandatory = true)
	protected String documentNumber;
	
	/** The domain name. Root folder for a document to make it domain specific*/
	@Field(jcrMandatory = true)
	protected String domainName;
	
	/** The module name. Sub root folder of Domain Name to make it module specific*/
	@Field(jcrMandatory = true)
	protected String moduleName;
	
	/** The tags. Search tags*/
	@Field
	protected String tags; // comma separated list of search tags
	
	/** The associated files. Collection of AssociatedFiles {@link AssociatedFile}*/
	@Collection
	protected Set<AssociatedFile> associatedFiles = new HashSet<AssociatedFile>();
	
	/** The created date. */
	@Field
	protected Date createdDate;
	
	/** The modified date. */
	@Field
	protected Date modifiedDate;
	
	/** The created by. */
	@Field
	protected int createdBy;
	
	/** The modified by. */
	@Field
	protected int modifiedBy;
	
	/**
	 * Gets the module name.
	 * @return the module name
	 */
	@Search
	public String getModuleName() {
		return moduleName;
	}
	
	/**
	 * Sets Module Name ModuleName must not contain any special characters other than _ and -.
	 * @param moduleName the Module Name
	 */
	public void setModuleName(String moduleName) {
		this.moduleName = moduleName;
	}
	
	/**
	 * Gets the domain name.
	 * @return the domain name
	 */
	@Search
	public String getDomainName() {
		return escapeSpecialChars(domainName);
	}
	
	/**
	 * Sets the domain name.
	 * @param domainName the new domain name
	 */
	public void setDomainName(String domainName) {
		this.domainName = domainName;
	}
	
	/**
	 * Gets the path.
	 * @return the path
	 */
	public String getPath() {
		return path;
	}
	
	/**
	 * Sets the path.
	 * @param path the new path
	 */
	public void setPath(String path) {
		this.path = path;
	}
	
	/**
	 * Gets the jcr uuid.
	 * @return the jcr uuid
	 */
	public String getJcrUUID() {
		return jcrUUID;
	}
	
	/**
	 * Sets the jcr uuid.
	 * @param jcrUUID the new jcr uuid
	 */
	public void setJcrUUID(String jcrUUID) {
		this.jcrUUID = jcrUUID;
	}
	
	/**
	 * Gets the document number.
	 * @return the document number
	 */
	@Search
	public String getDocumentNumber() {
		return documentNumber;
	}
	
	/**
	 * Sets the document number.
	 * @param documentNumber the new document number
	 */
	public void setDocumentNumber(String documentNumber) {
		this.documentNumber = documentNumber;
	}
	
	/**
	 * Gets the tags.
	 * @return the tags
	 */
	@Search(searchOp = Search.Operator.contains)
	public String getTags() {
		return tags;
	}
	
	/**
	 * Sets the tags.
	 * @param tags the new tags
	 */
	public void setTags(String tags) {
		this.tags = tags;
	}
	
	/**
	 * Gets the associated files.
	 * @return the associated files
	 */
	public Set<AssociatedFile> getAssociatedFiles() {
		return associatedFiles;
	}
	
	/**
	 * Sets the associated files.
	 * @param associatedFiles the new associated files
	 */
	public void setAssociatedFiles(Set<AssociatedFile> associatedFiles) {
		this.associatedFiles = associatedFiles;
	}
	
	/**
	 * Gets the created date.
	 * @return the created date
	 */
	@Search(searchOp = Search.Operator.between)
	public Date getCreatedDate() {
		return createdDate;
	}
	
	/**
	 * Sets the created date.
	 * @param createdDate the new created date
	 */
	public void setCreatedDate(Date createdDate) {
		this.createdDate = createdDate;
	}
	
	/**
	 * Gets the modified date.
	 * @return the modified date
	 */
	public Date getModifiedDate() {
		return modifiedDate;
	}
	
	/**
	 * Sets the modified date.
	 * @param modifiedDate the new modified date
	 */
	public void setModifiedDate(Date modifiedDate) {
		this.modifiedDate = modifiedDate;
	}
	
	/**
	 * Gets the created by.
	 * @return the created by
	 */
	@Search
	public int getCreatedBy() {
		return createdBy;
	}
	
	/**
	 * Sets the created by.
	 * @param createdBy the new created by
	 */
	public void setCreatedBy(int createdBy) {
		this.createdBy = createdBy;
	}
	
	/**
	 * Gets the modified by.
	 * @return the modified by
	 */
	public int getModifiedBy() {
		return modifiedBy;
	}
	
	/**
	 * Sets the modified by.
	 * @param modifiedBy the new modified by
	 */
	public void setModifiedBy(int modifiedBy) {
		this.modifiedBy = modifiedBy;
	}
	
	/**
	 * Escape special chars.
	 * @param value the value
	 * @return the string
	 */
	public static String escapeSpecialChars(String value) {
		return value.replace(":", ESCAPE_CHAR);
	}
}
